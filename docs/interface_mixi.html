<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>My Project: クラス Mixi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 作成： Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>メインページ</span></a></li>
      <li class="current"><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>構成</span></a></li>
      <li><a href="classes.html"><span>構成索引</span></a></li>
      <li><a href="hierarchy.html"><span>クラス階層</span></a></li>
      <li><a href="functions.html"><span>構成メンバ</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>クラス</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>マクロ定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>ページ</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="#properties">プロパティ</a> &#124;
<a href="class_mixi-members.html">すべてのメンバ一覧</a>  </div>
  <div class="headertitle">
<div class="title">クラス Mixi</div>  </div>
</div><!--header-->
<div class="contents">

<p>SDKのメインクラス  
 <a href="interface_mixi.html#details">[詳細]</a></p>

<p><code>#import &lt;<a class="el" href="_mixi_8h_source.html">Mixi.h</a>&gt;</code></p>
<div class="dynheader">
Mixiに対する継承グラフ</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_mixi.png" usemap="#Mixi_map" alt=""/>
  <map id="Mixi_map" name="Mixi_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a342e17ab07478d60e0de121e5a3e14a9"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a342e17ab07478d60e0de121e5a3e14a9">setupWithClientId:secret:</a></td></tr>
<tr class="memdesc:a342e17ab07478d60e0de121e5a3e14a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">OAuthクライアントIDとシークレットを指定してインスタンスを初期化。APIタイプはGraphAPI。  <a href="#a342e17ab07478d60e0de121e5a3e14a9">[詳細]</a><br/></td></tr>
<tr class="separator:a342e17ab07478d60e0de121e5a3e14a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5379a8dc9ec814906413e7765af5bf0"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#aa5379a8dc9ec814906413e7765af5bf0">setupWithType:clientId:secret:</a></td></tr>
<tr class="memdesc:aa5379a8dc9ec814906413e7765af5bf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">タイプとOAuthクライアントIDとシークレットを指定してインスタンスを初期化  <a href="#aa5379a8dc9ec814906413e7765af5bf0">[詳細]</a><br/></td></tr>
<tr class="separator:aa5379a8dc9ec814906413e7765af5bf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f510b299c57c773f8a4b09fe21d58f3"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a4f510b299c57c773f8a4b09fe21d58f3">setupWithType:clientId:secret:redirectUrl:</a></td></tr>
<tr class="memdesc:a4f510b299c57c773f8a4b09fe21d58f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">タイプとOAuthクライアントIDとシークレットとリダイレクトURLを指定してインスタンスを初期化  <a href="#a4f510b299c57c773f8a4b09fe21d58f3">[詳細]</a><br/></td></tr>
<tr class="separator:a4f510b299c57c773f8a4b09fe21d58f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab56e382ca0be5866fc0e0cf35316460"><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#aab56e382ca0be5866fc0e0cf35316460">setupWithConfig:</a></td></tr>
<tr class="memdesc:aab56e382ca0be5866fc0e0cf35316460"><td class="mdescLeft">&#160;</td><td class="mdescRight">設定を指定してインスタンスを初期化  <a href="#aab56e382ca0be5866fc0e0cf35316460">[詳細]</a><br/></td></tr>
<tr class="separator:aab56e382ca0be5866fc0e0cf35316460"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72bdfe4cc7c959fbfd888e7b7e1ba48"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#ae72bdfe4cc7c959fbfd888e7b7e1ba48">reportOncePerDay</a></td></tr>
<tr class="memdesc:ae72bdfe4cc7c959fbfd888e7b7e1ba48"><td class="mdescLeft">&#160;</td><td class="mdescRight">UUカウントのためにpingを実行  <a href="#ae72bdfe4cc7c959fbfd888e7b7e1ba48">[詳細]</a><br/></td></tr>
<tr class="separator:ae72bdfe4cc7c959fbfd888e7b7e1ba48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10d52f320da4de077fa431cd2018fac"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#ad10d52f320da4de077fa431cd2018fac">setPropertiesFromDictionary:</a></td></tr>
<tr class="memdesc:ad10d52f320da4de077fa431cd2018fac"><td class="mdescLeft">&#160;</td><td class="mdescRight">辞書オブジェクトでプロパティをまとめて設定  <a href="#ad10d52f320da4de077fa431cd2018fac">[詳細]</a><br/></td></tr>
<tr class="separator:ad10d52f320da4de077fa431cd2018fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88daf35762f78f05fd0a692f937a910e"><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a88daf35762f78f05fd0a692f937a910e">application:openURL:sourceApplication:annotation:error:</a></td></tr>
<tr class="memdesc:a88daf35762f78f05fd0a692f937a910e"><td class="mdescLeft">&#160;</td><td class="mdescRight">公式アプリからの戻り値を処理  <a href="#a88daf35762f78f05fd0a692f937a910e">[詳細]</a><br/></td></tr>
<tr class="separator:a88daf35762f78f05fd0a692f937a910e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b667fed76ed2ae0305e4893f3d07f2"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a52b667fed76ed2ae0305e4893f3d07f2">isMixiAppInstalled</a></td></tr>
<tr class="memdesc:a52b667fed76ed2ae0305e4893f3d07f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">mixi公式iPhoneアプリがインストールされているかどうか  <a href="#a52b667fed76ed2ae0305e4893f3d07f2">[詳細]</a><br/></td></tr>
<tr class="separator:a52b667fed76ed2ae0305e4893f3d07f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57fc46c08566ee1345b204e3c7135c51"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a57fc46c08566ee1345b204e3c7135c51">isUsingSDKAuthorizer</a></td></tr>
<tr class="memdesc:a57fc46c08566ee1345b204e3c7135c51"><td class="mdescLeft">&#160;</td><td class="mdescRight">SDK単体で認可を実行しているかどうか  <a href="#a57fc46c08566ee1345b204e3c7135c51">[詳細]</a><br/></td></tr>
<tr class="separator:a57fc46c08566ee1345b204e3c7135c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15dc8ffab84a95f028db38b6c92ef8b2"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a15dc8ffab84a95f028db38b6c92ef8b2">isUsingAppAuthorizer</a></td></tr>
<tr class="memdesc:a15dc8ffab84a95f028db38b6c92ef8b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">mixi公式iPhoneアプリで認可を実行しているかどうか  <a href="#a15dc8ffab84a95f028db38b6c92ef8b2">[詳細]</a><br/></td></tr>
<tr class="separator:a15dc8ffab84a95f028db38b6c92ef8b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e4565616cccfb78c96a596b14ba6a1"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#aa6e4565616cccfb78c96a596b14ba6a1">isAuthorized</a></td></tr>
<tr class="memdesc:aa6e4565616cccfb78c96a596b14ba6a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">アクセストークンを取得済みかどうか  <a href="#aa6e4565616cccfb78c96a596b14ba6a1">[詳細]</a><br/></td></tr>
<tr class="separator:aa6e4565616cccfb78c96a596b14ba6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1893fb6e96007237dcf231eb672e7a24"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a1893fb6e96007237dcf231eb672e7a24">isAccessTokenExpired</a></td></tr>
<tr class="memdesc:a1893fb6e96007237dcf231eb672e7a24"><td class="mdescLeft">&#160;</td><td class="mdescRight">アクセストークンが期限切れかどうか  <a href="#a1893fb6e96007237dcf231eb672e7a24">[詳細]</a><br/></td></tr>
<tr class="separator:a1893fb6e96007237dcf231eb672e7a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a3cfccacf38f8f76876467fe2a3ebdc"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a4a3cfccacf38f8f76876467fe2a3ebdc">isRefreshTokenExpired</a></td></tr>
<tr class="memdesc:a4a3cfccacf38f8f76876467fe2a3ebdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">リフレッシュトークンが期限切れかどうか  <a href="#a4a3cfccacf38f8f76876467fe2a3ebdc">[詳細]</a><br/></td></tr>
<tr class="separator:a4a3cfccacf38f8f76876467fe2a3ebdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63d8f11ca744e7a8e3875639262f2463"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a63d8f11ca744e7a8e3875639262f2463">refreshAccessToken</a></td></tr>
<tr class="memdesc:a63d8f11ca744e7a8e3875639262f2463"><td class="mdescLeft">&#160;</td><td class="mdescRight">リフレッシュトークンを使用してアクセストークンを同期的にリフレッシュ  <a href="#a63d8f11ca744e7a8e3875639262f2463">[詳細]</a><br/></td></tr>
<tr class="separator:a63d8f11ca744e7a8e3875639262f2463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96affa0065deb1469a2860d29eca738e"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a96affa0065deb1469a2860d29eca738e">refreshAccessTokenWithError:</a></td></tr>
<tr class="memdesc:a96affa0065deb1469a2860d29eca738e"><td class="mdescLeft">&#160;</td><td class="mdescRight">リフレッシュトークンを使用してアクセストークンを同期的にリフレッシュ  <a href="#a96affa0065deb1469a2860d29eca738e">[詳細]</a><br/></td></tr>
<tr class="separator:a96affa0065deb1469a2860d29eca738e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acadb1d7dab3f471a6662e5c8f593a368"><td class="memItemLeft" align="right" valign="top">(NSURLConnection *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#acadb1d7dab3f471a6662e5c8f593a368">refreshAccessTokenWithDelegate:</a></td></tr>
<tr class="separator:acadb1d7dab3f471a6662e5c8f593a368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a276fc88167b6c49cfcc0d4bd5805551d"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a276fc88167b6c49cfcc0d4bd5805551d">authorize:</a></td></tr>
<tr class="memdesc:a276fc88167b6c49cfcc0d4bd5805551d"><td class="mdescLeft">&#160;</td><td class="mdescRight">公式アプリを呼び出して認証を実行  <a href="#a276fc88167b6c49cfcc0d4bd5805551d">[詳細]</a><br/></td></tr>
<tr class="separator:a276fc88167b6c49cfcc0d4bd5805551d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d984a7debd31ad0143cff582d7c92d3"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a4d984a7debd31ad0143cff582d7c92d3">authorizeForPermission:</a></td></tr>
<tr class="memdesc:a4d984a7debd31ad0143cff582d7c92d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">公式アプリを呼び出して認証を実行  <a href="#a4d984a7debd31ad0143cff582d7c92d3">[詳細]</a><br/></td></tr>
<tr class="separator:a4d984a7debd31ad0143cff582d7c92d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eb744ca929cb567ac9ffcf677b9f162"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a3eb744ca929cb567ac9ffcf677b9f162">authorizeForPermissions:</a></td></tr>
<tr class="memdesc:a3eb744ca929cb567ac9ffcf677b9f162"><td class="mdescLeft">&#160;</td><td class="mdescRight">公式アプリを呼び出して認証を実行  <a href="#a3eb744ca929cb567ac9ffcf677b9f162">[詳細]</a><br/></td></tr>
<tr class="separator:a3eb744ca929cb567ac9ffcf677b9f162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a525336d58d3174f8a4ef32bbcfa8e261"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a525336d58d3174f8a4ef32bbcfa8e261">logout</a></td></tr>
<tr class="memdesc:a525336d58d3174f8a4ef32bbcfa8e261"><td class="mdescLeft">&#160;</td><td class="mdescRight">ログアウト  <a href="#a525336d58d3174f8a4ef32bbcfa8e261">[詳細]</a><br/></td></tr>
<tr class="separator:a525336d58d3174f8a4ef32bbcfa8e261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5275a60ca89e9fce0f8a66130691003"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#af5275a60ca89e9fce0f8a66130691003">revoke</a></td></tr>
<tr class="memdesc:af5275a60ca89e9fce0f8a66130691003"><td class="mdescLeft">&#160;</td><td class="mdescRight">認可状態を解除  <a href="#af5275a60ca89e9fce0f8a66130691003">[詳細]</a><br/></td></tr>
<tr class="separator:af5275a60ca89e9fce0f8a66130691003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affcb4db71ad6ee76a5c9d9855ebad163"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#affcb4db71ad6ee76a5c9d9855ebad163">revokeWithError:</a></td></tr>
<tr class="memdesc:affcb4db71ad6ee76a5c9d9855ebad163"><td class="mdescLeft">&#160;</td><td class="mdescRight">認可状態を解除  <a href="#affcb4db71ad6ee76a5c9d9855ebad163">[詳細]</a><br/></td></tr>
<tr class="separator:affcb4db71ad6ee76a5c9d9855ebad163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb7019335b3b5925c5b37e63299c7ed"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a6bb7019335b3b5925c5b37e63299c7ed">revokeAndLogout</a></td></tr>
<tr class="memdesc:a6bb7019335b3b5925c5b37e63299c7ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">認可状態を解除してログアウト  <a href="#a6bb7019335b3b5925c5b37e63299c7ed">[詳細]</a><br/></td></tr>
<tr class="separator:a6bb7019335b3b5925c5b37e63299c7ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0644c3ce56b5e5c8b8049a3f4706a49"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#ad0644c3ce56b5e5c8b8049a3f4706a49">revokeAndLogoutWithError:</a></td></tr>
<tr class="memdesc:ad0644c3ce56b5e5c8b8049a3f4706a49"><td class="mdescLeft">&#160;</td><td class="mdescRight">認可状態を解除してログアウト  <a href="#ad0644c3ce56b5e5c8b8049a3f4706a49">[詳細]</a><br/></td></tr>
<tr class="separator:ad0644c3ce56b5e5c8b8049a3f4706a49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b37c1d1572914c37ea6bf38b2b3b0a"><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a93b37c1d1572914c37ea6bf38b2b3b0a">retrieveTokensFromURL:sourceApplication:error:</a></td></tr>
<tr class="memdesc:a93b37c1d1572914c37ea6bf38b2b3b0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">公式アプリからの戻りURLからaccess token、refresh tokenなどを抽出.  <a href="#a93b37c1d1572914c37ea6bf38b2b3b0a">[詳細]</a><br/></td></tr>
<tr class="separator:a93b37c1d1572914c37ea6bf38b2b3b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85f69d0aa8130480486adde0166d863a"><td class="memItemLeft" align="right" valign="top">(NSError *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a85f69d0aa8130480486adde0166d863a">retrieveErrorFromURL:</a></td></tr>
<tr class="memdesc:a85f69d0aa8130480486adde0166d863a"><td class="mdescLeft">&#160;</td><td class="mdescRight">公式アプリの戻りURLからエラーを抽出  <a href="#a85f69d0aa8130480486adde0166d863a">[詳細]</a><br/></td></tr>
<tr class="separator:a85f69d0aa8130480486adde0166d863a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741e41d32be11da144813158c39e095a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a741e41d32be11da144813158c39e095a"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a741e41d32be11da144813158c39e095a">store</a></td></tr>
<tr class="memdesc:a741e41d32be11da144813158c39e095a"><td class="mdescLeft">&#160;</td><td class="mdescRight">インスタンスの情報を保持 <br/></td></tr>
<tr class="separator:a741e41d32be11da144813158c39e095a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785af50322e48ab77dab7c9a1ad9add8"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a785af50322e48ab77dab7c9a1ad9add8">restore</a></td></tr>
<tr class="memdesc:a785af50322e48ab77dab7c9a1ad9add8"><td class="mdescLeft">&#160;</td><td class="mdescRight">インスタンスの情報を復帰  <a href="#a785af50322e48ab77dab7c9a1ad9add8">[詳細]</a><br/></td></tr>
<tr class="separator:a785af50322e48ab77dab7c9a1ad9add8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55337c28a4dc95fa02d9235a8a6e9a53"><td class="memItemLeft" align="right" valign="top">(NSURLConnection *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a55337c28a4dc95fa02d9235a8a6e9a53">sendRequest:delegate:forced:</a></td></tr>
<tr class="memdesc:a55337c28a4dc95fa02d9235a8a6e9a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">APIを実行（非同期）  <a href="#a55337c28a4dc95fa02d9235a8a6e9a53">[詳細]</a><br/></td></tr>
<tr class="separator:a55337c28a4dc95fa02d9235a8a6e9a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5069cca4a059bdb7e25aea0c411247"><td class="memItemLeft" align="right" valign="top">(NSURLConnection *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a2d5069cca4a059bdb7e25aea0c411247">sendRequest:delegate:</a></td></tr>
<tr class="memdesc:a2d5069cca4a059bdb7e25aea0c411247"><td class="mdescLeft">&#160;</td><td class="mdescRight">APIを実行（非同期）  <a href="#a2d5069cca4a059bdb7e25aea0c411247">[詳細]</a><br/></td></tr>
<tr class="separator:a2d5069cca4a059bdb7e25aea0c411247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6247644b88526f2015ac9146c33b85ca"><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a6247644b88526f2015ac9146c33b85ca">rawSendSynchronousRequest:error:</a></td></tr>
<tr class="memdesc:a6247644b88526f2015ac9146c33b85ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">APIを実行して結果を文字列で取得（同期）  <a href="#a6247644b88526f2015ac9146c33b85ca">[詳細]</a><br/></td></tr>
<tr class="separator:a6247644b88526f2015ac9146c33b85ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b8ad3ab074f5ede6d4fde5f7814ec5"><td class="memItemLeft" align="right" valign="top">(NSDictionary *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a75b8ad3ab074f5ede6d4fde5f7814ec5">sendSynchronousRequest:error:</a></td></tr>
<tr class="memdesc:a75b8ad3ab074f5ede6d4fde5f7814ec5"><td class="mdescLeft">&#160;</td><td class="mdescRight">APIを実行して結果を辞書型で取得（同期）  <a href="#a75b8ad3ab074f5ede6d4fde5f7814ec5">[詳細]</a><br/></td></tr>
<tr class="separator:a75b8ad3ab074f5ede6d4fde5f7814ec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b00cbb32f6509b65f51d163254d77eb"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_mixi_view_controller.html">MixiViewController</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_mixi.html#a4b00cbb32f6509b65f51d163254d77eb">buildViewControllerWithRequest:delegate:</a></td></tr>
<tr class="memdesc:a4b00cbb32f6509b65f51d163254d77eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">画面を伴うAPIを実行するための画面を取得  <a href="#a4b00cbb32f6509b65f51d163254d77eb">[詳細]</a><br/></td></tr>
<tr class="separator:a4b00cbb32f6509b65f51d163254d77eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:a824d7e53a0cc099285036ccd04d5f856"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_mixi.html">Mixi</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_mixi.html#a824d7e53a0cc099285036ccd04d5f856">sharedMixi</a></td></tr>
<tr class="memdesc:a824d7e53a0cc099285036ccd04d5f856"><td class="mdescLeft">&#160;</td><td class="mdescRight">共有されたインスタンスを取得  <a href="#a824d7e53a0cc099285036ccd04d5f856">[詳細]</a><br/></td></tr>
<tr class="separator:a824d7e53a0cc099285036ccd04d5f856"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
プロパティ</h2></td></tr>
<tr class="memitem:a7e270dc429966c7caf622998b2605d17"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e270dc429966c7caf622998b2605d17"></a>
<a class="el" href="interface_mixi_config.html">MixiConfig</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>config</b></td></tr>
<tr class="separator:a7e270dc429966c7caf622998b2605d17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ce622727e10c8c32de72dc0ec9b300d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ce622727e10c8c32de72dc0ec9b300d"></a>
NSArray *&#160;</td><td class="memItemRight" valign="bottom"><b>permissions</b></td></tr>
<tr class="separator:a3ce622727e10c8c32de72dc0ec9b300d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a148d5aae16fea586d95af299a4175abd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a148d5aae16fea586d95af299a4175abd"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>autoRefreshToken</b></td></tr>
<tr class="separator:a148d5aae16fea586d95af299a4175abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c9231afa22f023c0b522fa1a9616025"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c9231afa22f023c0b522fa1a9616025"></a>
<a class="el" href="interface_mixi_view_controller.html">MixiViewController</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>mixiViewController</b></td></tr>
<tr class="separator:a7c9231afa22f023c0b522fa1a9616025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46e8a1e4695be354b18f6079291dc45d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46e8a1e4695be354b18f6079291dc45d"></a>
<a class="el" href="interface_mixi_authorizer.html">MixiAuthorizer</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>authorizer</b></td></tr>
<tr class="separator:a46e8a1e4695be354b18f6079291dc45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e56908a0f440c51e8287c3e318a6ce"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa3e56908a0f440c51e8287c3e318a6ce"></a>
<a class="el" href="interface_mixi_reporter.html">MixiReporter</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>uuReporter</b></td></tr>
<tr class="separator:aa3e56908a0f440c51e8287c3e318a6ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">説明</h2>
<div class="textblock"><p>SDKのメインクラス </p>
<p>APIのほとんどは本クラスを通じて実行されます。ただし、実行されるAPIの内容はパラメータとして受け取る<code><a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a></code>で保持されています。</p>
<p>SDKを利用する場合は次のヘッダファイルをインポートしてください。</p>
<p><code>#import "MixiSDK.h"</code></p>
<h1><a class="anchor" id="API呼び出し準備"></a>
API呼び出し準備</h1>
<p>本クラスはシングルトンクラスです。インスタンスは次のようにして取得できます。</p>
<p><code>[<a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> sharedMixi]</code></p>
<p>ただし、APIを実行する前に一度シングルトンオブジェクトを初期化しておく必要があります。 例えばGraph APIを使用する場合、 UIApplicationDelegate::application:didFinishLaunchingWithOptions: メソッド内で次のように記述するといいでしょう。 （全ての引数はアプリケーションの設定に合わせて変更してください）</p>
<pre><code><a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> *mixi = [[<a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> sharedMixi] setupWithType:kMixiApiTypeSelectorGraphApi 
                                    clientId:"ab12c345de6789f12345" 
                                      secret:@"a1b2c3456d789ef0123ghi4567jklmn89op01qrs"
                                 redirectUrl:@"mixi-connect://success"];
[mixi restore];
[mixi reportOncePerDay];
</code></pre><p>mixiアプリの場合、 redirectUrl は不要です。</p>
<pre><code><a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> *mixi = [[<a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> sharedMixi] setupWithType:kMixiApiTypeSelectorMixiApp
                                    clientId:"ab12c345de6789f12345" 
                                      secret:@"a1b2c3456d789ef0123ghi4567jklmn89op01qrs"];
[mixi restore];
[mixi reportOncePerDay];
</code></pre><p>なお、上記のMixi::reportOncePerDayはアプリの起動をmixiに通知するものです。 このコードの追記は任意ですが、サービスの改善のために協力していただけると幸いです。 アプリケーションの情報は一切送信されません。</p>
<dl class="section see"><dt>参照</dt><dd><a class="el" href="interface_mixi_reporter.html#a0289ef94e59e7bb30a8174fe53a40859" title="APIを実行します ">- pingWithMixi: (MixiReporter)</a></dd></dl>
<h2><a class="anchor" id="認可"></a>
認可</h2>
<p>mixiアプリのAPIを利用するためには、ユーザにAPI利用のための認可を行なってもらう必要があります。そのための画面を表示するのが authorize: メソッドです。</p>
<p><code>[mixi authorize:"r_profile", @"w_diary", nil];</code></p>
<p>このメソッドを呼び出すことで、ユーザーの認可を促す画面が表示されます。</p>
<p>デフォルトではmixi公式iPhoneアプリ（以下、公式アプリ）の有無によって認可画面の表示に異なるオブジェクトが利用されるため、公式アプリを使用した認可、およびSDK単体での認可に対応した2つの処理を記述してください。</p>
<h3><a class="anchor" id="公式アプリを使用した認可"></a>
公式アプリを使用した認可</h3>
<p>端末に公式アプリがインストールされている場合は、認可／認可解除は公式アプリを利用して行われます。 公式アプリを利用して認可するとログイン情報が公式アプリと共有されるため、公式アプリですでにログイン済みであればユーザーIDとパスワードの入力を省略できます。</p>
<p>公式アプリから認可結果（アクセストークンなど）を受け取るために UIApplicationDelegate::application:openURL:sourceApplication:annotation: メソッドに次のような処理を追加してください。</p>
<pre><code>NSError *error = nil;
NSString *apiType = [[<a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> sharedMixi] application:application openURL:url sourceApplication:sourceApplication annotation:annotation error:&amp;error];
if (error) {
    // エラーが発生しました
}
else if ([apiType isEqualToString:kMixiAppApiTypeToken]) {
    // 認可処理に成功しました
}
else if ([apiType isEqualToString:kMixiAppApiTypeRevoke]) {
    // 認可解除処理に成功しました
}
else if ([apiType isEqualToString:kMixiAppApiTypeReceiveRequest]) {
    // リクエストAPIによるリクエスト受け取り
}
</code></pre><h3><a class="anchor" id="SDK単体での認可"></a>
SDK単体での認可</h3>
<p>SDKの持つウェブビューコントローラを使用して認可画面を表示するには、そのビューコントローラの親になるビューコントローラを設定します。</p>
<p>APIを呼び出すビューコントローラのUIViewController::viewDidAppear:に次のようなコードを追加してください。（MixiAuthorizer::setParentViewControllerに設定する値は適宜変更してください）</p>
<p><code></p>
<pre> - (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    <a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> *mixi = [<a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> sharedMixi];
    mixi.authorizer.parentViewController = [self navigationController];
}
</pre><p></code></p>
<p>認可が完了するとその結果はSDK内に保持され、事前設定されたparentViewControllerに処理が戻されます。 認可完了時にそれら以外の処理を実行する必要がある場合は認可オブジェクトにデリゲートを設定してください。</p>
<p><code></p>
<pre> mixi.authorizer.delegte = [[YourDelegate alloc] init];
</pre><p></code></p>
<dl class="section see"><dt>参照</dt><dd>MixiSDKAuthorizerDelegate::authorizer:didSuccessWithEndpoint: </dd>
<dd>
MixiSDKAuthorizerDelegate::authorizer:didCancelWithEndpoint: </dd>
<dd>
MixiSDKAuthorizerDelegate::authorizer:didFailWithEndpoint:error:</dd></dl>
<p>なお、認可画面のツールバーはデフォルトでは標準のくすんだ青色になっています。 アプリケーションのイメージカラーに合わせてツールバーの色を変更したい場合はtoolbarColorプロパティを設定してください。</p>
<p><code></p>
<pre> <a class="el" href="interface_mixi_multiplex_authorizer.html" title="mixi公式iPhoneアプリがインストールされているかどうかで認可処理を担当するオブジェクトを切り替えるクラス。iOS7以降ではSDK付属の認可画面を使用します。 ...">MixiMultiplexAuthorizer</a> *authorizer = (MixiMultiplexAuthorizer*)mixi.authorizer;
authorizer.sdkAuthorizer.toolbarColor = [UIColor blackColor];
</pre><p></code></p>
<h2><a class="anchor" id="公式アプリの有無に関わらず認可手段を固定する"></a>
公式アプリの有無に関わらず認可手段を固定する</h2>
<p>認可手段を固定するには UIApplicationDelegate::application:didFinishLaunchingWithOptions: メソッド内で <a class="el" href="interface_mixi.html#aa5379a8dc9ec814906413e7765af5bf0" title="タイプとOAuthクライアントIDとシークレットを指定してインスタンスを初期化 ">setupWithType:clientId:secret: (Mixi)</a> を呼び出した後に mixi.authorizer を直接設定してください。</p>
<h3><a class="anchor" id="公式アプリを使用した認可に固定する"></a>
公式アプリを使用した認可に固定する</h3>
<p>認可に公式アプリを必ず使用するには次のように記述します。 （ただし、アプリケーションの実行に公式アプリが必須となってしまうためApple社の審査に通らない可能性があります）</p>
<pre><code>mixi.authorizer = [<a class="el" href="interface_mixi_app_authorizer.html" title="mixi公式iPhoneアプリを使用して認可を実行するクラス ">MixiAppAuthorizer</a> authorizer];</code></pre><p>公式アプリでの認可だけを使用する場合は先に説明したSDK単体認可用のコードは不要です。</p>
<h3><a class="anchor" id="SDK単体での認可に固定する"></a>
SDK単体での認可に固定する</h3>
<p>SDKの持つ認可画面を必ず使用するには次のように記述します。 （ただし、mixiアプリの場合は公式アプリがインストールされているときには必ずそちらを使用して認可を行うように実装してください）</p>
<pre><code>mixi.authorizer = [<a class="el" href="interface_mixi_s_d_k_authorizer.html" title="Graph APIの場合に、SDK自身で認可を実行するクラス ">MixiSDKAuthorizer</a> authorizerWithRedirectUrl:mixi.config.redirectUrl];</code></pre><p>何らかの理由でmixiアプリでSDK単体での認可に固定したい場合はリダイレクトURLは設定しなくても構いません。</p>
<pre><code>mixi.authorizer = [<a class="el" href="interface_mixi_s_d_k_authorizer.html" title="Graph APIの場合に、SDK自身で認可を実行するクラス ">MixiSDKAuthorizer</a> authorizer];</code></pre><p>SDK単体での認可だけを使用する場合は先に説明した公式アプリを利用した認可用のコードは不要です。</p>
<h1><a class="anchor" id="友人一覧取得API呼び出し"></a>
友人一覧取得API呼び出し</h1>
<p>APIはエンドポイントとパラメーターを設定した<code><a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a></code>インスタンスを、<code><a class="el" href="interface_mixi.html#a2d5069cca4a059bdb7e25aea0c411247" title="APIを実行（非同期） ">sendRequest:delegate: (Mixi)</a></code>メソッドに渡すことで実行します。 API実行前に認可が完了しているかどうかを確認して、未認可の場合は先に認可しておきます。認可に失敗した場合はmixi公式アプリがインストールされていないか、最新版ではない可能性があるので、必要に応じてAppStoreのmixi公式アプリダウンロードを提案する画面を開きます。</p>
<pre><code>if ([mixi isAuthorized]) {
    <a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> requestWithEndpoint:＠"/people/＠me/＠friends"];
    [mixi sendRequest:request delegate:mixiDelegate];
}
else if (![mixi authorizeForPermission:＠"r_profile"]) {
    <a class="el" href="interface_mixi_web_view_controller.html" title="ウェブビューコントローラ ">MixiWebViewController</a> *vc = MixiUtilDownloadViewController(self, (closeDownloadView:));
    vc.orientationDelegate = self;
    [self presentModalViewController:vc animated:YES];
}
</code></pre><p>公式アプリダウンロード画面で「キャンセル」ボタンをクリックされた場合の処理はSDK利用者が自分で実装しなければいけません。 上記の例であれば、呼び出し元のコントローラで次のようなメソッドを定義します。</p>
<ul>
<li>(void)closeDownloadView:(id)sender { [self dismissModalViewControllerAnimated:YES]; }</li>
</ul>
<h1><a class="anchor" id="画像付きボイス投稿API呼び出し"></a>
画像付きボイス投稿API呼び出し</h1>
<p>パラメーター付きの<code><a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a></code>は次のようにして作成できます。サンプルのとおり、<code>UIImage</code>インスタンスを渡すと画像を添付できます。</p>
<pre><code>if ([mixi isAuthorized]) {
    NSString *path = [[NSBundle mainBundle] pathForResource:＠"yoichiro" ofType:＠"png"];
    UIImage *image = [[UIImage alloc] initWithContentsOfFile:path];
    <a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> postRequestWithEndpoint:＠"/voice/statuses/update" 
                                                  paramsAndKeys:＠"こんにちはこんにちは", ＠"status",
                                                                image, "photo", nil];
    [mixi sendRequest:request delegate:mixiDelegate];
}
else if (![mixi authorizeForPermission:＠"w_voice"]) {
    MixiUtilShowErrorMessage("公式アプリが入っていないか古いです");
}
</code></pre><h1><a class="anchor" id="日記投稿API呼び出し"></a>
日記投稿API呼び出し</h1>
<p>複雑なオブジェクトは<code>NSMutableDictionary</code>インスタンスで指定します。</p>
<pre><code>if ([mixi isAuthorized]) {
    NSMutableDictionary *diary = [NSMutableDictionary dictionary];
    [diary setValue:"今日のなんとか" forKey:＠"title"];
    [diary setValue:@"今日はあれとかこれとか" forKey:＠"body"];
    NSMutableDictionary *privacy = [NSMutableDictionary dictionary];
    [privacy setValue:"self" forKey:＠"visibility"];
    [diary setValue:privacy forKey:@"privacy"];</code></pre><pre><code>    <a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> postRequestWithEndpoint:＠"/diary/articles/＠me/＠self" 
                                                  paramsAndKeys:diary, ＠"request", nil];
    [mixi sendRequest:request delegate:mixiDelegate];
}
else {
    [mixi authorizeForPermission:＠"w_diary"];
}
</code></pre><h1><a class="anchor" id="写真投稿API呼び出し"></a>
写真投稿API呼び出し</h1>
<p>画像オブジェクトをparamsプロパティの値に設定すると画像が一つしか指定されていない場合でもマルチパートで送信されます。 写真投稿APIのように画像をリクエストボディに設定する必要がある場合は、bodyプロパティに画像オブジェクトを設定してください。 （なお、paramsとbodyを同時に指定した場合はリクエストボディはbodyプロパティの値になり、パラメーターはエンドポイントにクエリパラメーターとして追加されます）</p>
<pre><code>if ([mixi isAuthorized]) {
    NSString *path = [[NSBundle mainBundle] pathForResource:"yoichiro" ofType:@"png"];
    UIImage *image = [[UIImage alloc] initWithContentsOfFile:path];
    <a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> postRequestWithEndpoint:"/photo/mediaItems///123456"
                                                           body:image
                                                  paramsAndKeys:"写真タイトル", @"title", nil];
    [mixi sendRequest:request delegate:self];
}
else {
    [mixi authorizeForPermission:"w_photo"];
}
</code></pre><h1><a class="anchor" id="リクエストAPI呼び出し"></a>
リクエストAPI呼び出し</h1>
<p>リクエストAPI呼び出しは確認ダイアログを表示するため、<code>buildViewControllerWithRequest:delegate:</code>メソッドを使用して呼び出します。</p>
<pre><code>if ([mixi isAuthorized]) {
    NSString *message = ＠"こんにちはこんにちは";
    NSString *recipients = ＠"abcdefghijklm";
    NSString *url = ＠"http://mixi.jp/run_appli.pl?id=xxxxx";
    NSString *mobileUrl = ＠"http://ma.mixi.net/xxxxx/";
    NSString *image = ＠"http://profile.img.mixi.jp/photo/user/mlkjihgfedcba_12345678901.jpg,image/jpeg";</code></pre><pre><code>    <a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> requestWithEndpoint:＠"/dialog/requests"
                                              paramsAndKeys:message, ＠"message",
                                                            recipients, ＠"recipients",
                                                            url, ＠"url",
                                                            mobileUrl, ＠"mobile_url",
                                                            image, ＠"image", 
                                                            nil];
    UIViewController *viewController = [mixi buildViewControllerWithRequest:request delegate:mixiDelegate];
    [self presentModalViewController:viewController animated:YES];
}
else {
    [mixi authorizeForPermission:＠"mixi_apps"];
}
</code></pre><h1><a class="anchor" id="リクエスト削除API呼び出し"></a>
リクエスト削除API呼び出し</h1>
<p>リクエストAPIで送信されたリクエストをアプリケーションで受け取った場合は、処理が完了したら明示的にリクエストを削除しなければいけません。 アプリケーションの起動に使用されたURLのクエリパラメータとしてリクエストIDが付加されています。 リクエストの処理完了後に、そのIDを利用してリクエストを削除してください。</p>
<pre><code>NSString *requestId = MixiUtilGetRequestIdFromURL(url);
<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> deleteRequestWithEndpoint:"/apps/requests/＠me/＠self" 
                                                paramsAndKeys:requestId, ＠"requestIds", nil];
[[<a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> sharedMixi] sendRequest:request delegate:self];
</code></pre><h1><a class="anchor" id="APIの実行結果を処理"></a>
APIの実行結果を処理</h1>
<p>API実行結果はsendメソッド群の引数に与えていた<code><a class="el" href="protocol_mixi_delegate-p.html" title="mixi API実行結果処理用のデリゲート ">MixiDelegate</a></code>プロトコルを実装したデリゲートで処理します。 例えば、APIの実行結果をAlertViewで表示するには次のようなデリゲートメソッドを定義したクラスのインスタンスをsendメソッド群の引数に与えます。</p>
<pre><code>- (void)mixi:(Mixi*)mixi didFinishLoading:(NSString*)data {
    MixiUtilShowMessageTitle(data, ＠"実行結果");
}
</code></pre><p>上記以外のデリゲートメソッドについては<code><a class="el" href="protocol_mixi_delegate-p.html" title="mixi API実行結果処理用のデリゲート ">MixiDelegate</a></code>のドキュメントを参照してください。</p>
<h1><a class="anchor" id="APIを同期呼び出し"></a>
APIを同期呼び出し</h1>
<p><a class="el" href="interface_mixi.html#a75b8ad3ab074f5ede6d4fde5f7814ec5" title="APIを実行して結果を辞書型で取得（同期） ">sendSynchronousRequest:error: (Mixi)</a> メソッドを使用してAPIを同期的に実行することもできます。 ただし、同期的に実行した場合、APIの呼び出しが完了するまでアプリケーションの動作が停止するため、どうしても必要な場合を除き、非同期呼び出しを使用してください。</p>
<pre><code>NSError *error = nil;
<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> requestWithEndpoint:＠"/people/＠me/＠friends"];
NSDictionary *result = [mixi sendSynchronousRequest:request error:&amp;error];
// 呼び出しが完了するまで停止します
if (error) {
    // エラー
}
else {
    NSArray *friends = [result objectForKey:＠"entry"];
    // 友人一覧を利用
}
</code></pre><h1><a class="anchor" id="API呼び出しをキャンセル"></a>
API呼び出しをキャンセル</h1>
<p>Mixi::sendRequest:delegate メソッドは呼び出しの結果として NSURLConnection オブジェクトを返します。 リクエストをキャンセルする場合はこの NSURLConnection オブジェクトを使用してください。</p>
<p>例えばAPI呼び出しを0.5秒後にキャンセルする場合は次のようになります。</p>
<pre><code><a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> *mixi = [<a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> sharedMixi];
<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> requestWithEndpoint:＠"/people/＠me/＠friends"];
NSURLConnection *conn = [mixi sendRequest:request delegate:self];
[conn performSelector:＠selector(cancel) withObject:nil delay:0.5];
</code></pre><h1><a class="anchor" id="アクセストークンの自動リフレッシュを使用しない"></a>
アクセストークンの自動リフレッシュを使用しない</h1>
<p>デフォルトの状態では、アクセストークンが期限切れの場合、自動的にリフレッシュされ新しいトークンを使用してAPIリクエストが実行されます。 ただしこのリフレッシュは同期的に行われます。 もし非同期にトークンをリフレッシュしたい場合は、次の例を参考にしてください。 （エラー処理などは省略しています）</p>
<pre><code>― (void)doMyRequest {
    <a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> *mixi = [<a class="el" href="interface_mixi.html" title="SDKのメインクラス ">Mixi</a> sharedMixi];
    mixi.autoRefreshToken = NO;
    <a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> *request = [<a class="el" href="interface_mixi_request.html" title="mixi APIのリクエストに必要な情報を保持するクラス ">MixiRequest</a> requestWithEndpoint:＠"/people/＠me/＠friends"];
    request.openMixiAppToAuthorizeIfNeeded = NO;
    [mixi sendRequest:request delegate:self];
}</code></pre><pre><code>// トークンが期限切れの場合に非同期にリフレッシュ（API呼び出しの結果を処理しています）
― (void)mixi:(Mixi*)mixi didFailWithError:(NSError*)error {
    if (error.code == kMixiTokenErrorExpired) {
        [mixi refreshAccessTokenWithDelegate:self];
    }
}</code></pre><pre><code>// トークンリフレッシュに成功したのでトークンを保持してリクエストを再送（トークンリフレッシュの結果を処理しています）
― (void)mixi:(Mixi*)mixi didSuccessWithJson:(NSDictionary*)data {
    [mixi setPropertiesFromDictionary:data];
    [self doMyRequest];
}
</code></pre> </div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="a88daf35762f78f05fd0a692f937a910e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString *) application: </td>
          <td></td>
          <td class="paramtype">(UIApplication *)&#160;</td>
          <td class="paramname"><em>application</em></td>
        </tr>
        <tr>
          <td class="paramkey">openURL:</td>
          <td></td>
          <td class="paramtype">(NSURL *)&#160;</td>
          <td class="paramname"><em>url</em></td>
        </tr>
        <tr>
          <td class="paramkey">sourceApplication:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>sourceApplication</em></td>
        </tr>
        <tr>
          <td class="paramkey">annotation:</td>
          <td></td>
          <td class="paramtype">(id)&#160;</td>
          <td class="paramname"><em>annotation</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(NSError**)&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>公式アプリからの戻り値を処理 </p>
<p>アプリケーションのURLスキームで呼び出された場合を処理するためのユーテリィティメソッドです。 UIApplicationDelegate::application:openURL:sourceApplication:annotation 内で呼び出してください。 独自の制御が必要な場合は当メソッドの実装をアプリケーションデリゲートの同名メソッドにコピーして自由に修正して構いません。</p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">application</td><td>呼び出されたアプリケーション </td></tr>
    <tr><td class="paramname">url</td><td>呼び出しに使用されたURL </td></tr>
    <tr><td class="paramname">sourceApplication</td><td>呼び出し元アプリケーション </td></tr>
    <tr><td class="paramname">annotation</td><td>付加情報 </td></tr>
    <tr><td class="paramname">error</td><td>エラー </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>実行されたAPIの種類。認可:kMixiAppApiTypeToken（"token"）。認可解除:kMixiAppApiTypeRevoke（"revoke"）。 </dd></dl>

</div>
</div>
<a class="anchor" id="a276fc88167b6c49cfcc0d4bd5805551d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) authorize: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>permission</em></td>
        </tr>
        <tr>
          <td class="paramkey">,</td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>公式アプリを呼び出して認証を実行 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">permission</td><td>要求するパーミッション。可変長。最後の引数は必ずnilにすること </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>公式アプリの起動に成功したらYESを返します。公式アプリが古いか、インストールされていない場合にはNOを返します。 </dd></dl>

</div>
</div>
<a class="anchor" id="a4d984a7debd31ad0143cff582d7c92d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) authorizeForPermission: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>permission</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>公式アプリを呼び出して認証を実行 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">permission</td><td>要求するパーミッション </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>公式アプリの起動に成功したらYESを返します。公式アプリが古いか、インストールされていない場合にはNOを返します。 </dd></dl>

</div>
</div>
<a class="anchor" id="a3eb744ca929cb567ac9ffcf677b9f162"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) authorizeForPermissions: </td>
          <td></td>
          <td class="paramtype">(NSArray*)&#160;</td>
          <td class="paramname"><em>permissions</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>公式アプリを呼び出して認証を実行 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">permissions</td><td>要求するパーミッション </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>公式アプリの起動に成功したらYESを返します。公式アプリが古いか、インストールされていない場合にはNOを返します。 </dd></dl>

</div>
</div>
<a class="anchor" id="a4b00cbb32f6509b65f51d163254d77eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_mixi_view_controller.html">MixiViewController</a> *) buildViewControllerWithRequest: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_mixi_request.html">MixiRequest</a>*)&#160;</td>
          <td class="paramname"><em>request</em></td>
        </tr>
        <tr>
          <td class="paramkey">delegate:</td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_mixi_delegate-p.html">MixiDelegate</a>&gt;)&#160;</td>
          <td class="paramname"><em>delegate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>画面を伴うAPIを実行するための画面を取得 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>リクエスト </td></tr>
    <tr><td class="paramname">delegate</td><td>リクエスト結果を処理するデリゲート </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>APIを実行する画面のコントローラー </dd></dl>

</div>
</div>
<a class="anchor" id="a1893fb6e96007237dcf231eb672e7a24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isAccessTokenExpired </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>アクセストークンが期限切れかどうか </p>
<dl class="section return"><dt>戻り値</dt><dd>アクセストークンが期限切れかどうか </dd></dl>

</div>
</div>
<a class="anchor" id="aa6e4565616cccfb78c96a596b14ba6a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isAuthorized </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>アクセストークンを取得済みかどうか </p>
<dl class="section return"><dt>戻り値</dt><dd>アクセストークンを取得済みかどうか </dd></dl>

</div>
</div>
<a class="anchor" id="a52b667fed76ed2ae0305e4893f3d07f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isMixiAppInstalled </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mixi公式iPhoneアプリがインストールされているかどうか </p>
<dl class="section return"><dt>戻り値</dt><dd>mixi公式iPhoneアプリがインストールされているかどうか </dd></dl>

</div>
</div>
<a class="anchor" id="a4a3cfccacf38f8f76876467fe2a3ebdc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isRefreshTokenExpired </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>リフレッシュトークンが期限切れかどうか </p>
<dl class="section return"><dt>戻り値</dt><dd>リフレッシュトークンが期限切れかどうか </dd></dl>

</div>
</div>
<a class="anchor" id="a15dc8ffab84a95f028db38b6c92ef8b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isUsingAppAuthorizer </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mixi公式iPhoneアプリで認可を実行しているかどうか </p>
<dl class="section return"><dt>戻り値</dt><dd>mixi公式iPhoneアプリで認可を実行しているかどうか </dd></dl>

</div>
</div>
<a class="anchor" id="a57fc46c08566ee1345b204e3c7135c51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isUsingSDKAuthorizer </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SDK単体で認可を実行しているかどうか </p>
<dl class="section return"><dt>戻り値</dt><dd>SDK単体で認可を実行しているかどうか </dd></dl>

</div>
</div>
<a class="anchor" id="a525336d58d3174f8a4ef32bbcfa8e261"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) logout </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ログアウト </p>
<p>SDKが端末上に保持している情報をクリアします。 </p>

</div>
</div>
<a class="anchor" id="a6247644b88526f2015ac9146c33b85ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString *) rawSendSynchronousRequest: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_mixi_u_r_l_request_constructor.html">MixiURLRequestConstructor</a>*)&#160;</td>
          <td class="paramname"><em>request</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(NSError**)&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APIを実行して結果を文字列で取得（同期） </p>
<p>（リダイレクト先で結果を返すAPIがあるため）リダイレクトされた場合は、リダイレクト先を返します。</p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>リクエスト </td></tr>
    <tr><td class="paramname">error　エラー</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>リクエスト結果 </dd></dl>

</div>
</div>
<a class="anchor" id="a63d8f11ca744e7a8e3875639262f2463"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) refreshAccessToken </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>リフレッシュトークンを使用してアクセストークンを同期的にリフレッシュ </p>
<dl class="section return"><dt>戻り値</dt><dd>成功したらYES、そうでなければNOを返します </dd></dl>

</div>
</div>
<a class="anchor" id="acadb1d7dab3f471a6662e5c8f593a368"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSURLConnection *) refreshAccessTokenWithDelegate: </td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_mixi_delegate-p.html">MixiDelegate</a>&gt;)&#160;</td>
          <td class="paramname"><em>delegate</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>リフレッシュトークンを使用してアクセストークンを非同期にリフレッシュ</p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">delegate</td><td>結果を受け取るデリゲート </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>コネクション。nilの場合は接続に失敗しています。 </dd></dl>

</div>
</div>
<a class="anchor" id="a96affa0065deb1469a2860d29eca738e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) refreshAccessTokenWithError: </td>
          <td></td>
          <td class="paramtype">(NSError**)&#160;</td>
          <td class="paramname"><em>error</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>リフレッシュトークンを使用してアクセストークンを同期的にリフレッシュ </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">error</td><td>エラー </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>成功したらYES、そうでなければNOを返します </dd></dl>

</div>
</div>
<a class="anchor" id="ae72bdfe4cc7c959fbfd888e7b7e1ba48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) reportOncePerDay </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UUカウントのためにpingを実行 </p>
<p>複数回送信されたとしても一日に一度しかカウントされません。 </p>

</div>
</div>
<a class="anchor" id="a785af50322e48ab77dab7c9a1ad9add8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) restore </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>インスタンスの情報を復帰 </p>
<dl class="section return"><dt>戻り値</dt><dd>成功したらYES、そうでなければNOを返します </dd></dl>

</div>
</div>
<a class="anchor" id="a85f69d0aa8130480486adde0166d863a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSError *) retrieveErrorFromURL: </td>
          <td></td>
          <td class="paramtype">(NSURL*)&#160;</td>
          <td class="paramname"><em>url</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>公式アプリの戻りURLからエラーを抽出 </p>
<p>エラーコードは次の通り。</p>
<ul>
<li>kMixiAuthErrorConnectionFailed 公式アプリで接続エラーでログイン画面を開けない場合</li>
<li>kMixiAuthErrorOAuthFailed 公式アプリで認証エラーでログイン画面を開けない場合</li>
<li>kMixiAuthErrorInvalidOAuthParameters 公式アプリでOAuth不正パラメータでログイン画面を開けない場合</li>
</ul>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">url</td><td>アプリ起動に使用されたURL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>エラー </dd></dl>

</div>
</div>
<a class="anchor" id="a93b37c1d1572914c37ea6bf38b2b3b0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString *) retrieveTokensFromURL: </td>
          <td></td>
          <td class="paramtype">(NSURL*)&#160;</td>
          <td class="paramname"><em>url</em></td>
        </tr>
        <tr>
          <td class="paramkey">sourceApplication:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>sourceApplication</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(NSError**)&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>公式アプリからの戻りURLからaccess token、refresh tokenなどを抽出. </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">url</td><td>アプリ起動に使用されたURL </td></tr>
    <tr><td class="paramname">sourceApplication</td><td>呼び出し元アプリケーション。現在未使用。将来的に検証に使用したい。 </td></tr>
    <tr><td class="paramname">error</td><td>エラー </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>トークン </dd></dl>

</div>
</div>
<a class="anchor" id="af5275a60ca89e9fce0f8a66130691003"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) revoke </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>認可状態を解除 </p>
<dl class="section return"><dt>戻り値</dt><dd>認可解除呼び出しに成功したらYESを返します。公式アプリ経由で処理を実行する場合はYESを返しても解除が成功しているとは限りません。 </dd></dl>

</div>
</div>
<a class="anchor" id="a6bb7019335b3b5925c5b37e63299c7ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) revokeAndLogout </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>認可状態を解除してログアウト </p>
<p>SDKが端末上に保持している情報をクリアした後でサーバー上の認可状態を解除します。</p>
<dl class="section return"><dt>戻り値</dt><dd>認可解除呼び出しに成功したらYESを返します。公式アプリ経由で処理を実行する場合はYESを返しても解除が成功しているとは限りません。 </dd></dl>

</div>
</div>
<a class="anchor" id="ad0644c3ce56b5e5c8b8049a3f4706a49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) revokeAndLogoutWithError: </td>
          <td></td>
          <td class="paramtype">(NSError**)&#160;</td>
          <td class="paramname"><em>error</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>認可状態を解除してログアウト </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">error</td><td>エラー </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>認可解除呼び出しに成功したらYESを返します。公式アプリ経由で処理を実行する場合はYESを返しても解除が成功しているとは限りません。 </dd></dl>

</div>
</div>
<a class="anchor" id="affcb4db71ad6ee76a5c9d9855ebad163"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) revokeWithError: </td>
          <td></td>
          <td class="paramtype">(NSError**)&#160;</td>
          <td class="paramname"><em>error</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>認可状態を解除 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">error</td><td>エラー </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>認可解除呼び出しに成功したらYESを返します。公式アプリ経由で処理を実行する場合はYESを返しても解除が成功しているとは限りません。 </dd></dl>

</div>
</div>
<a class="anchor" id="a2d5069cca4a059bdb7e25aea0c411247"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSURLConnection *) sendRequest: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_mixi_u_r_l_request_constructor.html">MixiURLRequestConstructor</a>*)&#160;</td>
          <td class="paramname"><em>request</em></td>
        </tr>
        <tr>
          <td class="paramkey">delegate:</td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_mixi_delegate-p.html">MixiDelegate</a>&gt;)&#160;</td>
          <td class="paramname"><em>delegate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APIを実行（非同期） </p>
<p>アクセストークンのリフレッシュが必要な場合は、リフレッシュしてからAPIを実行します。</p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>リクエスト </td></tr>
    <tr><td class="paramname">delegate</td><td>リクエスト結果を処理するデリゲート </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>コネクション。nilの場合は接続に失敗しています。 </dd></dl>

</div>
</div>
<a class="anchor" id="a55337c28a4dc95fa02d9235a8a6e9a53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSURLConnection *) sendRequest: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_mixi_u_r_l_request_constructor.html">MixiURLRequestConstructor</a>*)&#160;</td>
          <td class="paramname"><em>request</em></td>
        </tr>
        <tr>
          <td class="paramkey">delegate:</td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_mixi_delegate-p.html">MixiDelegate</a>&gt;)&#160;</td>
          <td class="paramname"><em>delegate</em></td>
        </tr>
        <tr>
          <td class="paramkey">forced:</td>
          <td></td>
          <td class="paramtype">(BOOL)&#160;</td>
          <td class="paramname"><em>forced</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APIを実行（非同期） </p>
<p>アクセストークンの自動更新があり、処理がやや込み入っているので以下に簡単に説明します。 アクセストークンの更新に関係するものは次の5つです。</p>
<ul>
<li>引数forceの値</li>
<li>アクセストークンの期限</li>
<li>リフレッシュトークンの期限</li>
<li>autoRefreshTokenプロパティの値</li>
<li>MixiRequest::openMixiAppToAuthorizeIfNeededの値</li>
</ul>
<p>それらを次の順でチェックしてAPIを呼び出します。</p>
<ol type="1">
<li>引数forceがYESの場合にはアクセストークンの期限を無視して強制的にAPIを実行します。</li>
<li>forceがNOの場合にアクセストークンが期限切れなら、リフレッシュトークンの期限を確認します。</li>
<li>リフレッシュトークンの期限が切れていた場合はトークンをリフレッシュできないので8.に進みます。</li>
<li>リフレッシュトークンが有効なら、プロパティautoRefreshTokenの値を確認します。</li>
<li>autoRefreshTokenがNOの場合はトークンをリフレッシュしないので8.に進みます。</li>
<li>autoRefreshTokenがYESの場合はトークンをリフレッシュします。</li>
<li>トークンのリフレッシュに成功したら、そのトークンを使用してAPIを実行します。</li>
<li>トークンのリフレッシュに失敗したら、MixiRequest::openMixiAppToAuthorizeIfNeededの値を確認します。</li>
<li>openMixiAppToAuthorizeIfNeededがYESの場合は、公式アプリの認可画面を開きます。</li>
<li>openMixiAppToAuthorizeIfNeededがNOの場合は、エラーを返します。</li>
</ol>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>リクエスト </td></tr>
    <tr><td class="paramname">delegate</td><td>リクエスト結果を処理するデリゲート </td></tr>
    <tr><td class="paramname">forced</td><td>アクセストークンの期限切れを気にせずとにかく実行するか、そうではないか </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>コネクション。nilの場合は接続に失敗しています。 </dd></dl>

</div>
</div>
<a class="anchor" id="a75b8ad3ab074f5ede6d4fde5f7814ec5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSDictionary *) sendSynchronousRequest: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_mixi_u_r_l_request_constructor.html">MixiURLRequestConstructor</a>*)&#160;</td>
          <td class="paramname"><em>request</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(NSError**)&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APIを実行して結果を辞書型で取得（同期） </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>リクエスト </td></tr>
    <tr><td class="paramname">error　エラー</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>リクエスト結果 </dd></dl>

</div>
</div>
<a class="anchor" id="ad10d52f320da4de077fa431cd2018fac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setPropertiesFromDictionary: </td>
          <td></td>
          <td class="paramtype">(NSDictionary*)&#160;</td>
          <td class="paramname"><em>dict</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>辞書オブジェクトでプロパティをまとめて設定 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">dict</td><td>有効なキーは"access_token"、"refresh_token"、"expires_in"、"state" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a342e17ab07478d60e0de121e5a3e14a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setupWithClientId: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>clientId</em></td>
        </tr>
        <tr>
          <td class="paramkey">secret:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>secret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OAuthクライアントIDとシークレットを指定してインスタンスを初期化。APIタイプはGraphAPI。 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">clientId</td><td>OAuthコンシューマーキー </td></tr>
    <tr><td class="paramname">secret</td><td>OAuthコンシューマーシークレット </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>指定された値で設定されたMixiインスタンス </dd></dl>

</div>
</div>
<a class="anchor" id="aab56e382ca0be5866fc0e0cf35316460"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setupWithConfig: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_mixi_config.html">MixiConfig</a>*)&#160;</td>
          <td class="paramname"><em>config</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>設定を指定してインスタンスを初期化 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>設定 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>指定された値で設定されたMixiインスタンス </dd></dl>

</div>
</div>
<a class="anchor" id="aa5379a8dc9ec814906413e7765af5bf0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setupWithType: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="_mixi_api_type_8h.html#ad4110f202fe3e2f2035caf7e01694889">MixiApiType</a>)&#160;</td>
          <td class="paramname"><em>type</em></td>
        </tr>
        <tr>
          <td class="paramkey">clientId:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>clientId</em></td>
        </tr>
        <tr>
          <td class="paramkey">secret:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>secret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>タイプとOAuthクライアントIDとシークレットを指定してインスタンスを初期化 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>kMixiApiTypeSelectorMixiAppまたはkMixiApiTypeSelectorGraphApi </td></tr>
    <tr><td class="paramname">clientId</td><td>OAuthコンシューマーキー </td></tr>
    <tr><td class="paramname">secret</td><td>OAuthコンシューマーシークレット </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>指定された値で設定されたMixiインスタンス </dd></dl>

</div>
</div>
<a class="anchor" id="a4f510b299c57c773f8a4b09fe21d58f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) setupWithType: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="_mixi_api_type_8h.html#ad4110f202fe3e2f2035caf7e01694889">MixiApiType</a>)&#160;</td>
          <td class="paramname"><em>type</em></td>
        </tr>
        <tr>
          <td class="paramkey">clientId:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>clientId</em></td>
        </tr>
        <tr>
          <td class="paramkey">secret:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>secret</em></td>
        </tr>
        <tr>
          <td class="paramkey">redirectUrl:</td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>redirectUrl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>タイプとOAuthクライアントIDとシークレットとリダイレクトURLを指定してインスタンスを初期化 </p>
<dl class="params"><dt>引数</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>kMixiApiTypeSelectorMixiAppまたはkMixiApiTypeSelectorGraphApi </td></tr>
    <tr><td class="paramname">clientId</td><td>OAuthコンシューマーキー </td></tr>
    <tr><td class="paramname">secret</td><td>OAuthコンシューマーシークレット </td></tr>
    <tr><td class="paramname">redirectUrl</td><td>リダイレクトURL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>戻り値</dt><dd>指定された値で設定されたMixiインスタンス </dd></dl>

</div>
</div>
<a class="anchor" id="a824d7e53a0cc099285036ccd04d5f856"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="interface_mixi.html">Mixi</a> *) sharedMixi </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>共有されたインスタンスを取得 </p>
<dl class="section return"><dt>戻り値</dt><dd>共有されたインスタンス </dd></dl>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li><a class="el" href="_mixi_8h_source.html">Mixi.h</a></li>
<li>Mixi.m</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
My Projectに対してThu Sep 12 2013 11:29:26に生成されました。 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
